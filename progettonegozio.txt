alter session set "_oracle_script"=true;

DROP user NEGOZIO CASCADE;

CREATE user NEGOZIO IDENTIFIED BY admin;

alter session set current_schema = NEGOZIO;

GRANT CONNECT TO NEGOZIO;
GRANT CREATE TABLE TO NEGOZIO;
GRANT CREATE SEQUENCE TO NEGOZIO;
GRANT CREATE TRIGGER TO NEGOZIO;

ALTER USER NEGOZIO QUOTA UNLIMITED ON USERS;


CREATE TABLE UTENTE(

ID INTEGER generated by default as identity(start with 1) not null,
    NOME VARCHAR(30) NOT NULL,
    EMAIL VARCHAR(30)NOT NULL,
    USERNAME varchar(30) NOT NULL,
    PASSWORD VARCHAR(10)NOT NULL,
    PRIMARY KEY (ID) 
);

CREATE TABLE GIOCO(

    ID_GIOCO INTEGER generated by default as identity(start with 1) not null,
    NOME VARCHAR(30) NOT NULL,
    ANNO_USCITA DATE NOT NULL,
    FK_GENERE INTEGER NOT NULL,
    PRIMARY KEY (ID_GIOCO),
 constraint gioco foreign key(fk_genere)references genere(ID_genere)
 );

DROP TABLE  GIOCO

CREATE TABLE GENERE(
    ID_GENERE INTEGER generated by default as identity(start with 1) not null,
    NOME VARCHAR(50),
    PRIMARY KEY(ID_GENERE)
);

create table gioco_utente(

fk_utente number not null,
fk_gioco number not null,
 constraint ut foreign key(fk_utente)references utente(ID),
 constraint gio foreign key(fk_gioco)references gioco(ID_gioco)
);

CREATE TABLE ACQUISTOGIOCO (
    ID_Acquisto INTEGER generated by default as identity(start with 1) not null,
    fk_UT INTEGER not null,
    fk_gio INTEGER not null,
    NOME VARCHAR(30) NOT NULL,
    EMAIL VARCHAR(30)NOT NULL,
    INDIRIZZO varchar(30) NOT NULL,
    PASSWORD VARCHAR(10)NOT NULL,
    PRIMARY KEY (ID_acquisto),
    constraint utente1 foreign key(fk_ut)references UTENTE(ID),
    constraint gioco1 foreign key(fk_gio)references gioco(ID_gioco)
   );
select * from utente
select * from GENERE
select * from gioco


INSERT INTO genere VALUES (1,'RUOLO') ;
INSERT INTO genere VALUES (2,'SIMULAZIONE') ;
INSERT INTO genere VALUES (3,'AZIONE') ;
INSERT INTO genere VALUES (4,'AVVENTURA') ;
INSERT INTO genere VALUES (5,'ALTRO') ;

INSERT INTO GIOCO VALUES (1,'Dungeons e Dragons','8-dic-2000',1);
INSERT INTO GIOCO VALUES (2,'Mondo di Tenebra','4-gen-1991',1);
INSERT INTO GIOCO VALUES (3,'Star Wars','21-ott-1977',1);
INSERT INTO GIOCO VALUES (4,'The Sims 3','2-giu-2009',2);
INSERT INTO GIOCO VALUES (5,'Spiritfarer','18-ago-2020',2);
INSERT INTO GIOCO VALUES (6,'Assassin s Creed','13-nov-2007',3);
INSERT INTO GIOCO VALUES (7,'Watch Dogs','26-mag-2014',3);
INSERT INTO GIOCO VALUES (8,'Spyro','09-set-1998',4);
INSERT INTO GIOCO VALUES (9,'Horizon','28-feb-2017',4);

INSERT INTO GIOCO VALUES (10,'Resident Evil 2','25-feb-2019',5);
INSERT INTO GIOCO VALUES (11,'Silent Hill 2','24-set-2001',5);


